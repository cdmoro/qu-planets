import React, { CSSProperties } from "react"
import { IPlanet } from "../definitions/IPlanet"
import { getRandomInt } from "../utils/getRandomInt"
import { normalizeValue } from "../utils/normalizeValue"
import { stringToColor } from "../utils/stringToColor"

const Planet = (planet: IPlanet) => {
  const PLANET_PATH: string[] = [
    "M100.098 136.213a13.23 13.23 0 00-2.92 1.618c.575-.056 1.216-.123 1.86-.085 1.82.107 5.278.045 7.075.063 1.797.018 2.288.048 3.705.042.91-.004 2.41.365 3.507.368a13.23 13.23 0 00-3.334-1.97c-.549-.002-1.066-.016-2-.002-1.326.02-3.45.155-5.213.15-.827-.003-1.774-.105-2.68-.184zm2.406 6.195c-.321.013-.61.089-1.152.113-.868.038-2.467.174-3.378.212-.91.038-1.539-.082-2.083.043-.545.126-.516.364-1.154.533-.453.12-1.173-.166-1.865-.093a13.23 13.23 0 00-1.06 4.237c.4-.238.774-.665 1.072-.711.531-.083.71-.037 1.092 0 .381.037.623.147 1.184.232a29.9 29.9 0 002.181.235c.694.046 1.2.07 1.975.047.775-.024 1.761-.043 2.668-.229.906-.185 1.768-.618 2.73-.9.961-.282 2.073-.57 3.04-.783.966-.212 2.067-.38 2.753-.501.686-.121.942-.196 1.362-.233.42-.037.733-.062 1.15-.007.417.055.828.226 1.325.365.497.14.772.257 1.657.471.475.115 1.287.619 2.05.9a13.23 13.23 0 00-1.193-3.704c-.787-.127-1.596.126-2.154.159-.734.044-.913.1-1.507.23-.593.129-.994.411-2.04.584-1.047.173-3.315.234-4.236.207-.922-.027-1.013.04-1.285-.14-.273-.179-1.713-1.038-2.456-1.2a2.537 2.537 0 00-.676-.067zm12.254 6.443c-.287 0-.5.047-1.004.064-.67.022-2.024-.014-2.693.088-.669.101-.925.153-1.317.362-.392.21-.552.652-.985.848-.433.197-.852.17-1.535.219-.683.048-1.907.07-2.56.004-.653-.067-.697-.153-1.35-.28-.654-.125-1.783-.371-2.573-.46a17.03 17.03 0 00-2.154-.102c-.698.006-1.485-.01-2.026.133-.542.142-.83.38-1.196.577-.367.196-.557.444-1.007.595-.451.15-1.164.158-1.672.186-.236.013-.47-.088-.69-.154a13.23 13.23 0 00.71 2.453c.474-.063.995-.288 1.464-.304.752-.027 1.398 0 2.259 0s2.22-.063 2.908 0c.689.063.614.197 1.22.224.607.027 1.702-.181 2.391-.222.69-.042 1.09.004 1.743-.047.654-.05 1.455-.157 2.17-.279.715-.12 1.505-.42 2.117-.448.612-.027.877.108 1.501.18.625.073 1.46.112 2.248.251.788.14 1.48.471 2.47.604.553.074 1.255.338 1.94.42a13.23 13.23 0 001.044-4.136l-.022.002c-.479-.016-.919-.226-1.431-.352-.513-.127-1.144-.356-1.645-.409a3.045 3.045 0 00-.325-.018zm.993 7.358c-.52.033-1.216.4-2 .379-1.262-.035-3.486-.08-4.841-.102-1.355-.022-2.084-.054-3.289-.04-1.205.014-2.829.001-3.939.139-1.11.138-2.023.392-2.706.582-.683.19-.873.145-1.404.482-.316.2-.842.517-1.203.876a13.23 13.23 0 001.704 1.246c.16-.15.317-.308.483-.414.409-.262.787-.589 1.178-.737.391-.149.761-.157 1.105-.186.343-.029.456.006.947 0 .49-.006 1.242.024 1.998-.046s1.877-.37 2.524-.412c.648-.04.785-.013 1.334.047s1.234.236 1.946.357c.713.122 1.622.15 2.33.366.318.097.532.323.76.527a13.23 13.23 0 003.073-3.064z",
    "M101.814 135.66a13.23 13.23 0 00-3.017 1.155c-.003.508.344 1.033.399 1.536.072.666.076 1.826.17 1.97.093.146.22.857.56 1.282.34.425.935.798 1.503 1.105.568.308 1.532.452 1.882.703.35.252.368.262.365.45-.003.187-.081.128-.355.413a25.38 25.38 0 01-1.336 1.245c-.363.309-.695.426-.819.634-.123.208-.114.235-.065.411.048.176.233.382.435.52.202.14.55.114.748.257.2.143.335.306.414.54.079.232 0 .542 0 .798-.001.256.115.568-.006.739-.122.17-.193.113-.487.171-.295.059-.93.077-1.284.066-.353-.01-.5-.11-.83-.093-.328.017-.786.21-1.114.246-.328.036-.497.018-.838 0-.34-.019-.853.012-1.204-.131-.35-.143-.609-.547-.835-.655-.226-.107-.307-.124-.43-.098-.122.026-.1.025-.248.187-.148.161-.323.62-.53.851-.208.232-.433.449-.678.534-.245.085-.499.083-.693 0-.194-.084-.206-.242-.394-.418-.188-.175-.478-.503-.746-.619a1.274 1.274 0 00-.583-.118 13.23 13.23 0 009.755 11.931c.814-.626 1.861-1.435 2.025-1.538.264-.165 1.99-1.592 2.568-2.124.576-.53.751-.596.958-.98.206-.385.099-.846.262-1.219.164-.372.48-.736.69-.975.21-.24.197-.275.522-.485.325-.209.965-.404 1.484-.62.518-.215 1.137-.455 1.627-.671.49-.216.94-.525 1.317-.617.376-.091.408-.016.871-.032.463-.017 1.439.085 1.904-.061.466-.147.626-.132.857-.56.23-.426.158-1.7-.002-1.888-.161-.19-.772-.733-1.25-1.012a5.157 5.157 0 00-1.59-.632c-.635-.137-1.535-.086-2.18-.102-.643-.015-1.26.144-1.683-.002-.424-.145-.514-.351-.793-.615-.28-.264-.796-.567-.858-.981-.062-.415.305-1.042.497-1.107.193-.066 1.286-.69 1.474-.789.189-.098.875-.74 1.056-1.179.18-.439.107-.798.065-1.266-.042-.468-.012-1.164-.354-1.51-.342-.346-.728-.24-1.33-.328-.602-.088-1.556-.032-2.277-.11-.721-.077-1.36-.146-2.044-.344-.685-.197-1.71-.5-2.031-.846-.32-.346-.197-.443-.197-.597 0-.154.324-.586.23-.91-.095-.324-.45-.457-.789-.745-.24-.204-.435-.546-.767-.767z",
    "M103.939 135.314a13.23 13.23 0 00-7.765 3.332c.547 1.607 1.836 3.304 2.19 4.715.54 2.153.942 4.141 1.126 5.759.185 1.617.154 2.655.133 3.895-.02 1.241.095 1.954-.239 3.539-.177.84-.978 1.944-1.578 3.048a13.23 13.23 0 006.714 2.118c.501-1.41.909-3.204 1.248-4.502.556-2.133.96-4.12 1.04-6.222.079-2.102-.194-4.335-.57-6.288-.378-1.954-1.027-3.582-1.612-5.386-.39-1.2-.259-2.8-.687-4.008zm3.22.135c.541 1.007 1.798 2.05 2.192 3.483.646 2.348 1.41 6.417 1.725 8.645.315 2.229.397 3.047.391 4.67-.006 1.624-.142 3.106-.453 5.034-.162 1.002-.908 2.362-1.412 3.622a13.23 13.23 0 005.834-4.273c.163-1.63.252-3.234.385-4.394.337-2.94.154-4.265.211-6.99.02-.947.263-2.073.494-3.238a13.23 13.23 0 00-9.366-6.56zm-12.964 5.419a13.23 13.23 0 00-2.424 7.632 13.23 13.23 0 002.78 8.113c.737-2.271.714-5.785.756-7.793.057-2.674-.715-5.918-.89-6.277-.085-.174-.08-.916-.222-1.675z",
    "M109.755 136.155c-.19.218-.374.416-.538.52-.495.315-.592.337-.993.394-.4.058-.952-.132-1.357-.127-.404.006-.559-.046-1.057.129-.498.175-1.241.72-1.789 1.108-.548.389-1.158.828-1.497 1.21-.338.382-.347.575-.604.964-.257.39-.6 1.106-.945 1.365-.345.26-.45.249-.88.297-.43.048-1.169-.031-1.655-.17-.487-.138-.755-.49-1.234-.6-.48-.11-.77-.016-1.578 0-.432.01-.952-.163-1.546-.214a13.23 13.23 0 00-2.195 5.723 1.08 1.08 0 01.438.024c.79.273 1.009.75 1.443.87.433.121.55.184 1.017 0 .466-.183 1.026-.942 1.455-1.355.428-.412.701-.941 1.12-1.114.42-.173.678-.041 1.141 0 .464.041 1.072.198 1.623.292.551.095.929.295 1.685.275.756-.02 2-.322 2.765-.604.766-.282 1.247-.52 1.822-.973.576-.453 1.162-1.204 1.548-1.74.386-.536.446-1.045.814-1.416a3.116 3.116 0 011.293-.762c.457-.14.937-.158 1.364-.087.427.072.756.374 1.137.472.381.098.733.208 1.125.124.39-.085.678-.391 1.092-.648.11-.068.245-.081.389-.086a13.23 13.23 0 00-5.403-3.871zm7.105 6.484c-.096.245-.218.478-.423.655-.819.711-2.638 2.048-2.85 2.297-.212.249-2.632 2.224-2.843 2.392-.21.167-1.162 1.333-1.984 1.904-.823.571-2.645 1.328-2.936 1.414-.29.087-.772.066-1.399 0-.626-.066-1.63-.375-2.327-.497-.697-.122-1.288-.24-1.852-.255-.565-.015-1.03-.066-1.512.124-.481.19-1.028.694-1.245.985-.217.291-1.26.913-1.51 1.121-.25.208-1.524.735-2.256.862-.333.057-.666-.074-.985-.177a13.23 13.23 0 002.175 3.595c.366-.373.696-.81 1.005-.964.558-.277.735-.283 1.194-.308.459-.024.88.052 1.509.22.629.167 1.47.669 2.212.874.741.205 1.57.427 2.207.364.637-.063 1.1-.25 1.5-.566.401-.317.537-.905.82-1.21a3 3 0 01.806-.646c.332-.192.934-.423 1.181-.467.248-.043 1.43.161 2.198.14.769-.02 1.777-.064 2.393-.282.616-.218.809-.382 1.277-.808.469-.425.924-1.156 1.4-1.808.476-.65.912-1.638 1.45-2.103.537-.465.747-.613 1.534-.757.174-.032.392-.028.628-.007a13.23 13.23 0 00.002-.23 13.23 13.23 0 00-1.37-5.86zm-1.913 12.78a4.09 4.09 0 00-.893.146c-.66.168-1.314.588-1.856.956s-.932.832-1.387 1.211c-.454.379-.946.902-1.337 1.062-.39.16-.353.117-.823.086-.469-.03-1.279-.447-1.94-.465-.66-.018-1.327.195-1.938.356-.612.161-1.09.282-1.724.596-.634.314-1.814 1.173-2.02 1.342-.034.028-.153.192-.256.327a13.23 13.23 0 004.227.693 13.23 13.23 0 0011.206-6.198c-.049-.004-.106-.002-.15-.009-.474-.084-.81-.114-1.109-.103z",
    "M104.661 138.215a1.803 1.803 0 00-1.803 1.803 1.803 1.803 0 001.803 1.804 1.803 1.803 0 001.805-1.804 1.803 1.803 0 00-1.805-1.803zm5.543 1.533a1.233 1.233 0 00-1.234 1.233 1.233 1.233 0 001.234 1.233 1.233 1.233 0 001.234-1.233 1.233 1.233 0 00-1.234-1.233zm-11.389 2.408a3.712 3.712 0 00-3.641 3.711 3.712 3.712 0 003.713 3.713 3.712 3.712 0 003.711-3.713 3.712 3.712 0 00-3.711-3.711 3.712 3.712 0 00-.072 0zm10.519 2.337a3.718 3.718 0 00-3.719 3.718 3.718 3.718 0 003.719 3.719 3.718 3.718 0 003.718-3.719 3.718 3.718 0 00-3.718-3.718zm-11.45 6.958a1.546 1.546 0 00-1.522 1.546 1.546 1.546 0 001.546 1.547 1.546 1.546 0 001.546-1.547 1.546 1.546 0 00-1.546-1.546 1.546 1.546 0 00-.024 0zm5.342 1.516a3.029 3.029 0 00-2.963 3.028 3.029 3.029 0 003.028 3.029 3.029 3.029 0 003.03-3.029 3.029 3.029 0 00-3.03-3.028 3.029 3.029 0 00-.064 0zm6.297.956a1.26 1.26 0 00-1.254 1.26 1.26 1.26 0 001.26 1.26 1.26 1.26 0 001.26-1.26 1.26 1.26 0 00-1.26-1.26 1.26 1.26 0 00-.006 0z",
  ]

  // const RING = "m 153.20496,226.81594 a 21.655879,5.7769418 0 0 0 -9.30743,4.74596 21.655879,5.7769418 0 0 0 21.65604,5.77691 21.655879,5.7769418 0 0 0 21.65604,-5.77691 21.655879,5.7769418 0 0 0 -9.30746,-4.74544 c 0.1945,0.50571 0.36002,1.02564 0.49197,1.55908 a 17.750629,3.4254702 0 0 1 4.91029,2.36471 17.750629,3.4254702 0 0 1 -17.75084,3.42563 17.750629,3.4254702 0 0 1 -17.75087,-3.42563 17.750629,3.4254702 0 0 1 4.91083,-2.36523 c 0.13194,-0.53342 0.29694,-1.05338 0.49143,-1.55908 z";

  const planetStyle = (planet: IPlanet): CSSProperties => {
    const rotation_time = (parseInt(planet.rotation_period) * 13) / 87
    const rotation = getRandomInt(0, 360)
    const hue = (normalizeValue(planet.surface_water) + 1) * 360
    const size = normalizeValue(planet.diameter, 118000, 200) + 1
    const contrast = (normalizeValue(planet.surface_water) + 0.1) * 270

    return {
      animationDuration: `${rotation_time}s`,
      transform: `scale(${size}) rotateZ(${rotation}deg)`,
      filter: `hue-rotate(${hue}deg) contrast(${contrast}%)`,
    }
  }

  return (
    <svg
      className="relative transition-all duration-200 card__planet"
      xmlns="http://www.w3.org/2000/svg"
      width="200"
      height="200"
      viewBox="0 0 26.458 26.459"
      style={planetStyle(planet)}
    >
      <g transform="translate(-91.77 -135.27)">
        <circle
          cx="105"
          cy="148.5"
          r="13.229"
          fill={stringToColor(planet.name)}
        />
        <path
          fill-rule="evenodd"
          d={PLANET_PATH[planet.terrain.split(", ").length]}
          fillOpacity=".2"
          fill="#000"
        />
      </g>
    </svg>
  )
}

export default Planet
